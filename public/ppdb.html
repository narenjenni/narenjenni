<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>PPDB — SMK Perintis 1 Depok</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config={theme:{extend:{fontFamily:{sans:['Inter','ui-sans-serif','system-ui']},colors:{primary:'#1E3A8A'}}}}</script>
</head>
<body class="bg-slate-50 text-slate-800">
<header class="sticky top-0 z-40 backdrop-blur bg-white/80 border-b">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
    <a href="/index.html" class="font-extrabold">SMK Perintis 1 Depok</a>
    <nav class="hidden md:flex gap-6 text-sm">
      <a href="/berita.html" class="hover:text-primary">Berita</a>
      <a href="/agenda.html" class="hover:text-primary">Agenda</a>
      <a href="/galeri.html" class="hover:text-primary">Galeri</a>
      <a href="/ppdb.html" class="hover:text-primary">PPDB</a>
      <a href="/admin.html" class="hover:text-primary">Admin</a>
    </nav>
  </div>
</header>

<section class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
  <h1 class="text-3xl md:text-4xl font-extrabold">Formulir PPDB</h1>
  <p class="mt-2 text-slate-600">Isi data dengan benar. Anda dapat menambahkan berkas pendukung (rapor/sertifikat) PDF/JPG/PNG maksimum 3 file.</p>
  <form id="ppdbFilesForm" class="mt-6 rounded-2xl border bg-white p-6 shadow-sm space-y-4">
    <div class="grid md:grid-cols-2 gap-4">
      <input name="namaLengkap" placeholder="Nama Lengkap" required class="rounded-xl border px-3 py-2">
      <input name="nisn" placeholder="NISN" required class="rounded-xl border px-3 py-2">
      <input type="email" name="email" placeholder="Email" required class="rounded-xl border px-3 py-2">
      <input type="tel" name="telepon" placeholder="+62 812xxxxxxx" required class="rounded-xl border px-3 py-2">
    </div>
    <input name="alamat" placeholder="Alamat" required class="w-full rounded-xl border px-3 py-2">
    <input name="asalSekolah" placeholder="Asal Sekolah" required class="w-full rounded-xl border px-3 py-2">
    <select name="jurusan" required class="w-full rounded-xl border px-3 py-2">
      <option value="">— pilih jurusan —</option>
      <option>Bisnis Daring dan Pemasaran</option>
      <option>Otomatisasi dan Tata Kelola Perkantoran</option>
      <option>Akuntansi dan Keuangan Lembaga</option>
    </select>
    <textarea name="pesan" rows="4" placeholder="Pesan/Motivasi" class="w-full rounded-xl border px-3 py-2"></textarea>
    <input type="file" name="berkas" accept=".pdf,image/jpeg,image/png" multiple class="w-full rounded-xl border px-3 py-2"/>
    <div id="alert" class="hidden text-sm rounded-xl border p-3"></div>
    <div class="flex gap-3">
      <button class="rounded-xl bg-primary px-5 py-3 text-white font-semibold" type="submit">Kirim Pendaftaran</button>
      <a href="/index.html#ppdb" class="rounded-xl border px-5 py-3 font-semibold">Kembali</a>
    </div>
  </form>
</section>
<script>
const form=document.getElementById('ppdbFilesForm');const alertBox=document.getElementById('alert');
function showAlert(msg,ok=true){alertBox.classList.remove('hidden');alertBox.classList.toggle('bg-green-50',ok);alertBox.classList.toggle('border-green-200',ok);alertBox.classList.toggle('text-green-700',ok);alertBox.classList.toggle('bg-red-50',!ok);alertBox.classList.toggle('border-red-200',!ok);alertBox.classList.toggle('text-red-700',!ok);alertBox.textContent=msg;}
form.addEventListener('submit',async(e)=>{e.preventDefault();const fd=new FormData(form);const tel=String(fd.get('telepon')||'');if(!/^\+?\d{9,15}$/.test(tel)){showAlert('Nomor telepon/WA tidak valid',false);return;}try{const res=await fetch('/api/ppdb-with-files',{method:'POST',body:fd});const data=await res.json();if(!res.ok)throw new Error(data?.message||'Gagal mengirim.');showAlert('Pendaftaran + berkas terkirim.');form.reset();}catch(err){showAlert(err.message,false);}});
</script>

</body>
</html>