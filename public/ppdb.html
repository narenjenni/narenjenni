<!DOCTYPE html><html lang="id"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>PPDB — SMK Perintis 1 Depok</title>
<script src="https://cdn.tailwindcss.com"></script>
</head><body class="font-sans text-slate-900 bg-white">
<main class="max-w-5xl mx-auto px-4 sm:px-6 py-8">
<h1 class="text-3xl font-bold">Form PPDB</h1>
<p class="text-slate-600 mt-2">Isi data di bawah untuk mengirimkan pendaftaran ke panitia.</p>
<div class="mt-8 grid md:grid-cols-2 gap-8">
<form id="ppdbForm" class="grid gap-4">
  <div class="grid gap-2"><label class="text-sm font-medium">Nama Lengkap*</label><input name="nama" required class="rounded-xl border px-4 py-2"></div>
  <div class="grid gap-2"><label class="text-sm font-medium">Email*</label><input type="email" name="email" required class="rounded-xl border px-4 py-2"></div>
  <div class="grid gap-2"><label class="text-sm font-medium">Nomor WA/Telp</label><input name="telp" class="rounded-xl border px-4 py-2"></div>
  <div class="grid gap-2"><label class="text-sm font-medium">Jurusan*</label>
    <select name="jurusan" required class="rounded-xl border px-4 py-2">
      <option value="">— pilih jurusan —</option>
      <option value="BDP">Bisnis Daring & Pemasaran (BDP)</option>
      <option value="OTKP">Otomatisasi & Tata Kelola Perkantoran (OTKP)</option>
      <option value="AKL">Akuntansi & Keuangan Lembaga (AKL)</option>
    </select>
  </div>
  <div class="grid gap-2"><label class="text-sm font-medium">Pesan</label><textarea name="pesan" rows="4" class="rounded-xl border px-4 py-2"></textarea></div>
  <div class="flex items-center gap-3"><button id="btnSubmit" class="rounded-xl bg-blue-600 text-white px-5 py-2.5 font-semibold" type="submit">Kirim Pendaftaran</button><span id="statusMsg" class="text-sm"></span></div>
</form>
<aside class="rounded-2xl border bg-white p-6 shadow-sm">
  <div class="text-sm text-slate-500 mb-2">Kontak Panitia</div>
  <ul class="space-y-2 text-sm"><li><b>Email:</b> narenskii@gmail.com</li><li><b>API:</b> <a class="text-blue-600 underline" href="/api/health" target="_blank">/api/health</a></li></ul>
</aside>
</div></main>
<script>
(function(){const form=document.getElementById("ppdbForm");const btn=document.getElementById("btnSubmit");const statusMsg=document.getElementById("statusMsg");
form.addEventListener("submit",async(e)=>{e.preventDefault();statusMsg.textContent="";statusMsg.className="text-sm";btn.disabled=true;btn.textContent="Mengirim...";
const data={nama:form.nama.value.trim(),email:form.email.value.trim(),telp:form.telp.value.trim(),jurusan:form.jurusan.value,pesan:form.pesan.value.trim()};
try{const res=await fetch("/api/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)});const txt=await res.text();let json;try{json=JSON.parse(txt);}catch(_){throw new Error("Server tidak mengembalikan JSON. Response: "+txt.slice(0,100)+"...");}
if(res.ok&&json.ok){statusMsg.className="text-sm text-green-600";statusMsg.textContent=json.message||"Berhasil dikirim";form.reset();}
else{statusMsg.className="text-sm text-red-600";statusMsg.textContent=json.message||"Gagal mengirim";}}
catch(err){statusMsg.className="text-sm text-red-600";statusMsg.textContent=err.message||"Terjadi kesalahan";}
finally{btn.disabled=false;btn.textContent="Kirim Pendaftaran";}});})();</script>
</body></html>